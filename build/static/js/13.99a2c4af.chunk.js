(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[13],{447:function(e,t,a){"use strict";var n=a(24),c=a(1);t.a=Object(n.a)(Object(c.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},461:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var n=a(9),c=a(3),i=a(39),r=a(432),s=a(420),o=a(431),l=a(433),d=a(419),j=a(1),u={PaperProps:{style:{maxHeight:165.5,width:250}}};function b(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}function O(e){var t=e.data,a=e.handleSelected,O=e.title,m=e.defaultValue,f=Object(i.a)(),h=c.useState([]),x=Object(n.a)(h,2),p=x[0],g=x[1];return Object(j.jsx)("div",{children:Object(j.jsxs)(l.a,{sx:{width:"100%"},children:[Object(j.jsx)(s.a,{id:"list-select",children:O}),Object(j.jsx)(d.a,{labelId:"list-select",id:"list-select",value:m||"",onChange:function(e){g(e.target.value),a(e.target.value)},input:Object(j.jsx)(r.a,{label:O}),MenuProps:u,children:t.map((function(e){return Object(j.jsx)(o.a,{value:e,style:b(e,p,f),children:e},e)}))})]})})}},464:function(e,t,a){"use strict";var n=a(24),c=a(1);t.a=Object(n.a)(Object(c.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddBox")},679:function(e,t,a){"use strict";a.r(t);var n=a(57),c=a(438),i=a(125),r=a(2),s=a(17),o=a(27),l=a(9),d=a(3),j=a.n(d),u=a(168),b=a(328),O=a(320),m=a(325),f=a(55),h=a(96),x=a.n(h),p=a(423),g=a(429),v=a(430),y=a(407),C=a(1),S=function(e){var t=e.paramsPageDevices,a=e.totalPage,n=e.handleMoveToPrePage,c=e.handleMoveToNextPage;return Object(C.jsxs)(p.a,{container:!0,fullWidth:!0,children:[Object(C.jsx)(p.a,{item:!0,lg:8,md:8,sm:12,xs:12,style:{display:"flex",justifyContent:"flex-end"}}),Object(C.jsx)(p.a,{item:!0,lg:4,md:4,sm:12,xs:12,style:{display:"flex",justifyContent:"flex-end"},children:Object(C.jsxs)("span",{children:[Object(C.jsx)(g.a,{title:"Previous page",children:Object(C.jsx)(v.a,{disabled:1===t.page,onClick:n,children:Object(C.jsx)(y.a,{})})}),"Page ",t.page," of ",a,Object(C.jsx)(g.a,{title:"Next page",children:Object(C.jsx)(v.a,{disabled:t.page===a,onClick:c,children:Object(C.jsx)(x.a,{})})})]})})]})},w=a(335),k=a(434),N=a(404),P=a(74),T=a.n(P),M=a(408),I=a(409),D=a(51),R=a(417),E=a(324),z=a(464),B=a(88),W=a(461),F=a(683);function A(e){var t=e.label,a=e.selectedOption,n=e.setSelectedOption,c=Object(d.useState)([]),i=Object(l.a)(c,2),j=i[0],u=i[1],b=Object(d.useState)({page:1,limit:10,search:null}),O=Object(l.a)(b,2),m=O[0],f=O[1],h=Object(d.useState)(!1),x=Object(l.a)(h,2),p=x[0],g=x[1],v=function(e){f(Object(r.a)(Object(r.a)({},m),{},{search:e.target.value})),g(!1)},y=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.i)(m);case 2:200===(t=e.sent).status&&(a=t.data.listResult,console.log(a),u(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){y()}),[m]),Object(d.useEffect)((function(){p||f(Object(r.a)(Object(r.a)({},m),{},{search:null}))}),[p]),Object(C.jsx)("div",{children:Object(C.jsx)(F.a,{options:j,getOptionLabel:function(e){return e.title},id:"include-input-in-list",value:a,onChange:function(e,t){n(t),console.log(t),g(!0)},renderInput:function(e){return Object(C.jsx)(w.a,Object(r.a)(Object(r.a)({},e),{},{label:t,variant:"standard",onChange:v,fullWidth:!0}))}})})}var L=function(e){var t=e.setResettable,a=Object(d.useState)(!1),n=Object(l.a)(a,2),c=n[0],i=n[1],r=Object(d.useState)(""),b=Object(l.a)(r,2),O=b[0],f=b[1],h=Object(d.useState)(""),x=Object(l.a)(h,2),y=x[0],S=x[1],k=j.a.useState(null),N=Object(l.a)(k,2),P=N[0],T=N[1],M=function(){i((function(e){return!e})),S(""),f("")},I=function(){var e=!0,t={name:O,command:y,commandNotificationId:P.id},a=["command","name"];"Notification"===y&&a.push("commandNotificationId");for(var n=0;n<a.length;n++)if(!t[a[n]]){e=!1,i(!0),D.b.info("Missing required parameter: "+a[n]);break}return e},F=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var a,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I()){e.next=8;break}return a={name:O,command:y,commandNotificationId:P.id},e.next=5,Object(B.n)(a);case 5:n=e.sent,console.log("createList",n),n&&500===n.statusCode?n.message.includes("JSON parse error")?D.b.error("Contact must be phone number"):D.b.error(n.message):n&&200===n.status?(D.b.success("Create command success"),M(),t(!0)):(D.b.error(n.message),M());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(g.a,{arrow:!0,placement:"top",title:"Add New Command",children:Object(C.jsx)(v.a,{onClick:function(){i((function(e){return!e}))},children:Object(C.jsx)(z.a,{color:"primary"})})}),Object(C.jsx)(R.a,{open:c,onClose:M,children:Object(C.jsxs)(u.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4,minWidth:400,width:"65%",minHeight:"45%"},children:[Object(C.jsx)(m.a,{variant:"h6",component:"h2",gutterBottom:!0,children:"Create a new Command"}),Object(C.jsxs)(p.a,{container:!0,spacing:2,children:[Object(C.jsx)(p.a,{item:!0,xs:12,children:Object(C.jsx)(w.a,{id:"name",label:"Name",fullWidth:!0,margin:"normal",onChange:function(e){!function(e,t){"name"===t&&f(e.target.value)}(e,"name")},value:O})}),Object(C.jsx)(p.a,{item:!0,xs:12,children:Object(C.jsx)(W.a,{data:["Reboot","Notification"],handleSelected:function(e){S(e)},title:"Command",defaultValue:y})}),"Notification"===y?Object(C.jsx)(p.a,{item:!0,xs:12,children:Object(C.jsx)(A,{label:"Notification",selectedOption:P,setSelectedOption:T})}):Object(C.jsx)(C.Fragment,{})]}),Object(C.jsxs)(u.a,{sx:{position:"fixed",bottom:"1rem",left:"50%",transform:"translate(-50%, 0)",display:"flex",justifyContent:"space-between",width:"400px",padding:"0 1rem",backgroundColor:"white",zIndex:999},children:[Object(C.jsx)(E.a,{variant:"contained",onClick:M,children:"Cancel"}),Object(C.jsx)(E.a,{variant:"contained",type:"submit",onClick:F,children:"Save"})]})]})})]})},V=function(e){var t=e.searchTerm,a=e.setSearchTerm,n=e.handleResetTable,c=e.handleSearchMode,i=e.setResettable,r=0===t.trim().length;return Object(C.jsxs)(p.a,{container:!0,fullWidth:!0,children:[Object(C.jsx)(p.a,{item:!0,lg:8,md:8,sm:12,xs:12,style:{display:"flex",justifyContent:"flex-end"},children:Object(C.jsx)(w.a,{id:"search",type:"search",label:"Search",variant:"outlined",placeholder:"Only search in Policy",size:"small",value:t,onChange:function(e){a(e.target.value)},edge:"end",fullWidth:!0,InputProps:{endAdornment:Object(C.jsxs)(k.a,{children:[Object(C.jsx)(N.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(C.jsx)(g.a,{arrow:!0,placement:"top",title:"Only search in Policy",children:Object(C.jsx)(v.a,{type:"button","aria-label":"search",helperText:"Search",onClick:function(){r||c()},children:Object(C.jsx)(T.a,{color:"primary"})})})]})}})}),Object(C.jsxs)(p.a,{item:!0,lg:4,md:4,sm:12,xs:12,style:{display:"flex",justifyContent:"space-between"},children:[Object(C.jsx)(p.a,{lg:6,md:6,sm:6,xs:6,style:{display:"flex",justifyContent:"flex-start"},children:Object(C.jsx)(g.a,{arrow:!0,placement:"top",title:"Close Search",children:Object(C.jsx)(v.a,{type:"button",onClick:function(){a(""),n()},disabled:r,children:Object(C.jsx)(M.a,{color:"error"})})})}),Object(C.jsxs)(p.a,{lg:6,md:6,sm:6,xs:6,style:{display:"flex",justifyContent:"flex-end"},children:[Object(C.jsx)(N.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(C.jsx)(g.a,{arrow:!0,placement:"top",title:"Reset table to default",children:Object(C.jsx)(v.a,{color:"primary","aria-label":"clear",onClick:n,children:Object(C.jsx)(I.a,{})})}),Object(C.jsx)(L,{setResettable:i}),","]})]})]})},H=a(447);function K(e){var t=e.label,a=e.defaultNoti,n=e.selectedOption,c=e.setSelectedOption,i=Object(d.useState)([]),j=Object(l.a)(i,2),u=j[0],b=j[1],O=Object(d.useState)({page:1,limit:10,search:null}),m=Object(l.a)(O,2),f=m[0],h=m[1],x=Object(d.useState)(!1),p=Object(l.a)(x,2),g=p[0],v=p[1],y=function(e){h(Object(r.a)(Object(r.a)({},f),{},{search:e.target.value})),v(!1)},S=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.i)(f);case 2:200===(t=e.sent).status&&(a=t.data.listResult,b(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){S()}),[f]),Object(d.useEffect)((function(){if(!g&&u.length>0){var e=u.find((function(e){return e.id===a}));c(e),h(Object(r.a)(Object(r.a)({},f),{},{search:null})),v(!0)}}),[g,u,a,c,f]),Object(C.jsxs)("div",{children:["Recent Notification: ",n?n.title:"",Object(C.jsx)(F.a,{options:u,getOptionLabel:function(e){return e.title},id:"include-input-in-list",onChange:function(e,t){c(t),v(!0)},renderInput:function(e){return Object(C.jsx)(w.a,Object(r.a)(Object(r.a)({},e),{},{label:t,variant:"standard",onChange:y,fullWidth:!0}))}})]})}var J=function(e){var t=e.row,a=e.setUpdatetable,n=Object(d.useState)(!1),c=Object(l.a)(n,2),i=c[0],r=c[1],b=Object(d.useState)(t.original.command),O=Object(l.a)(b,2),f=O[0],h=O[1],x=Object(d.useState)(t.original.name),g=Object(l.a)(x,2),y=g[0],S=g[1],k=t.original.command,N=t.original.name,P=t.original.commandNotificationId,T=j.a.useState(null),M=Object(l.a)(T,2),I=M[0],z=M[1],F=function(){r((function(e){return!e}))},A=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var n,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k!==f||N!==y||P!==I){e.next=4;break}return D.b.info("Nothing changes"),F(),e.abrupt("return");case 4:if(""!==f&&""!==y){e.next=7;break}return F(),e.abrupt("return");case 7:return n={id:t.original.id,command:f,name:y,commandNotificationId:I.id},e.next=10,Object(B.w)(n);case 10:c=e.sent,console.log("editCommandResponse",c),c&&200===c.status?(D.b.success("Change command data success"),a(!0),F()):500===c.statusCode&&D.b.error("Error: ",c.message);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(v.a,{onClick:function(){r((function(e){return!e}))},children:[Object(C.jsx)(H.a,{color:"primary"}),Object(C.jsx)(m.a,{style:{marginLeft:"8px",color:"black"},children:"Edit Command"})]}),Object(C.jsx)(R.a,{open:i,onClose:F,children:Object(C.jsxs)(u.a,{sx:{position:"absolute",top:"50%",left:"50%",width:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4,minWidth:400},children:[Object(C.jsx)(m.a,{variant:"h6",component:"h2",gutterBottom:!0,children:"Edit"}),Object(C.jsxs)(p.a,{container:!0,spacing:2,children:[Object(C.jsx)(p.a,{item:!0,xs:12,children:Object(C.jsx)(W.a,{data:["Reboot","Notification"],handleSelected:function(e){h(e)},title:"Command",defaultValue:f})}),Object(C.jsx)(p.a,{item:!0,xs:12,children:Object(C.jsx)(w.a,{id:"name",label:"Name",fullWidth:!0,margin:"normal",onChange:function(e){return function(e){S(e.target.value)}(e)},value:y})}),"Notification"===f?Object(C.jsx)(p.a,{item:!0,xs:12,children:Object(C.jsx)(K,{label:"Notification",defaultNoti:P,selectedOption:I,setSelectedOption:z})}):Object(C.jsx)(C.Fragment,{})]}),Object(C.jsxs)(u.a,{sx:{display:"flex",justifyContent:"space-between",marginTop:"1rem"},children:[Object(C.jsx)(E.a,{variant:"contained",onClick:F,children:"Cancel"}),Object(C.jsx)(E.a,{variant:"contained",type:"submit",onClick:A,children:"Save"})]})]})})]})},U=a(56),q=a(64),G=a(76),Q=a.n(G),X=function(e){var t=e.id,a=Object(d.useState)(!1),n=Object(l.a)(a,2),c=n[0],i=n[1],r=Object(d.useState)([]),j=Object(l.a)(r,2),b=j[0],O=j[1],f=function(){i((function(e){return!e}))},h=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(B.m)(t);case 2:a=e.sent,console.log("detail",a),a&&200===a.status?O(a.data):500===a.statusCode&&D.b.error("Error: ",a.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(g.a,{arrow:!0,placement:"bottom",title:"Detail",children:Object(C.jsx)(v.a,{onClick:function(){i((function(e){return!e})),h()},disabled:!t,children:Object(C.jsx)(Q.a,{color:"primary"})})}),Object(C.jsx)(R.a,{open:c,onClose:f,children:Object(C.jsxs)(u.a,{sx:{position:"absolute",top:"50%",left:"50%",width:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4,minWidth:400},children:[Object(C.jsx)(m.a,{variant:"h6",component:"h2",gutterBottom:!0,children:"Detail Notification ID"}),Object(C.jsxs)(m.a,{children:["ID: ",b.id]}),Object(C.jsxs)(m.a,{children:["Title: ",b.title]}),Object(C.jsxs)(m.a,{children:["Message: ",b.message]}),Object(C.jsxs)(m.a,{children:["Created By: ",b.createdBy]}),Object(C.jsxs)(m.a,{children:["Created Date: ",Object(q.a)(b.createdDate)]}),Object(C.jsxs)(m.a,{children:["Modified By: ",b.modifiedBy]}),Object(C.jsxs)(m.a,{children:["Modified Date: ",Object(q.a)(b.modifiedDate)]}),Object(C.jsx)(u.a,{sx:{display:"flex",justifyContent:"flex-end",marginTop:"1rem"},children:Object(C.jsx)(E.a,{variant:"contained",onClick:f,children:"Cancel"})})]})})]})},Y=function(){var e=Object(d.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(d.useState)({page:1,limit:10,policyname:null}),i=Object(l.a)(c,2),j=i[0],h=i[1],x=Object(d.useState)(),p=Object(l.a)(x,2),g=p[0],v=p[1],y=Object(d.useState)(!0),w=Object(l.a)(y,2),k=w[0],N=w[1],P=Object(d.useState)(!1),T=Object(l.a)(P,2),M=T[0],I=T[1],R=Object(d.useState)(""),E=Object(l.a)(R,2),z=E[0],W=E[1],F=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(j),e.next=3,Object(B.f)(j);case 3:t=e.sent,console.log("Page List: ",t),200===t.status&&(null===t.data.totalElement&&null!==z&&D.b.error("No elements match"),a=t.data.listResult,n(a),v(t.data.totalPage));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){j.page<g&&(h({limit:j.limit,page:j.page+1}),N(!0))},L=function(){j.page>1&&(h({limit:j.limit,page:j.page-1}),N(!0))},H=function(){I(!0),W("")},K=function(){h(Object(r.a)(Object(r.a)({},j),{},{policyname:z})),N(!0)};Object(d.useEffect)((function(){M?(h({page:1,limit:10,policyname:null}),I(!1),N(!0)):k&&(console.log("change status"),F(),N(!1))}),[M,k]);var G=[{accessorKey:"id",header:"ID",size:20,enableEditing:!1,enableFilters:!1,muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"},Cell:function(e){return Object(C.jsx)("span",{children:e.row.original.id})}},{accessorKey:"command",header:"Command",enableEditing:!1,enableSorting:!1},{accessorKey:"name",header:"Name",enableEditing:!1,enableSorting:!1},{accessorKey:"commandNotificationId",header:"Notification",enableEditing:!1,enableSorting:!1,Cell:function(e){return Object(C.jsx)(u.a,{children:Object(C.jsx)(X,{id:e.row.original.commandNotificationId})})}}];return Object(C.jsx)(b.a,{children:Object(C.jsx)(O.a,{theme:U.a,children:Object(C.jsx)(f.a,{columns:G,data:a,options:{actionsColumnIndex:-1},enableExpanding:!0,enableGlobalFilter:!1,enableColumnFilters:!1,enableColumnActions:!1,enablePagination:!1,enableSorting:!1,muiTableBodyRowProps:{hover:!1},defaultColumn:{maxSize:120,minSize:10,size:100},initialState:{columnVisibility:{id:!1},columnOrder:["id","command","name","commandNotificationId","mrt-row-expand","mrt-row-actions"]},renderRowActionMenuItems:function(e){var t=e.row;e.table,e.closeMenu;return[Object(C.jsx)(u.a,{children:Object(C.jsx)(J,{row:t,setUpdatetable:N})})]},displayColumnDefOptions:{"mrt-row-actions":{size:300,header:""}},renderDetailPanel:function(e){var t=e.row;return Object(C.jsxs)(u.a,{sx:{display:"grid",margin:"auto",gridTemplateColumns:"1fr 1fr",width:"100%",justifyContent:"center",alignItems:"center"},children:[Object(C.jsxs)(m.a,{fontSize:"15px",children:["Created Date: ",Object(q.a)(t.original.createdDate)]}),Object(C.jsxs)(m.a,{fontSize:"15px",children:["Created By: ",t.original.createdBy]}),Object(C.jsxs)(m.a,{fontSize:"15px",children:["Modified Date: ",Object(q.a)(t.original.modifiedDate)]}),Object(C.jsxs)(m.a,{fontSize:"15px",children:["Modified By: ",t.original.modifiedBy]})]})},renderBottomToolbarCustomActions:function(){return Object(C.jsx)(S,{paramsPageDevices:j,totalPage:g,handleMoveToPrePage:L,handleMoveToNextPage:A})},renderTopToolbarCustomActions:function(){return Object(C.jsx)(V,{searchTerm:z,setSearchTerm:W,setResettable:I,handleSearchMode:K,handleResetTable:H})}})})})};t.default=function(){return Object(C.jsxs)(i.a,{children:[Object(C.jsx)(n.a,{routeSegments:[{name:"Policy Manager",path:"/tms-policy/policy-management"},{name:"Command",path:"/tms-policy/command-management"}]}),Object(C.jsx)(c.a,{spacing:3,children:Object(C.jsx)(Y,{})})]})}}}]);
//# sourceMappingURL=13.99a2c4af.chunk.js.map