(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[18],{441:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"f",(function(){return s})),a.d(t,"i",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return j}));var n=a(22),r=function(e){return n.a.get("/TMS/api/user/".concat(e),{})},c=function(e){var t={method:"get",maxBodyLength:1/0,url:"/TMS/api/user",params:{page:e.page,limit:e.limit,active:e.active,search:e.search}};return n.a.request(t)},s=function(e){return console.log("create data: ",e),n.a.post("/TMS/api/auth/signup",{name:e.name,username:e.username,password:e.password,company:e.company,email:e.email,contact:e.contact,rulename:e.rulename}).catch((function(e){if(e.response)return e.response.data}))},i=function(e){return console.log(e),n.a.put("/TMS/api/user/admin/".concat(e.id),{company:e.company,email:e.email,contact:e.contact,rulename:e.rulename})},o=function(e){return n.a.delete("/TMS/api/user/remove/".concat(e),{})},u=function(e,t){return Object(n.a)({method:"put",url:"/TMS/api/user/admin/password/".concat(e),params:{passwordnew:t}})},d=function(e,t,a){return Object(n.a)({method:"put",url:"/TMS/api/user/password/".concat(e),params:{passwordold:t,passwordnew:a}})},l=function(e){var t={method:"get",url:"/TMS/api/user/".concat(e,"/listDevice")};return n.a.request(t)},j=function(e){return Object(n.a)({method:"get",url:"/TMS/api/barSearch/device",params:{search:e}})}},689:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(438),c=a(429),s=a(324),i=a(249),o=a(111),u=a(57),d=a(5),l=a(2),j=a(17),b=a(27),p=a(6),m=a(423),O=a(441),h=a(3),x=a(516),g=a(172),f=a(51),w=a(1),v=Object(p.a)(x.TextValidator)((function(){return{width:"100%",marginBottom:"16px"}})),y=function(){var e=Object(h.useState)({}),t=Object(n.a)(e,2),a=t[0],r=t[1],c=Object(h.useState)({}),u=Object(n.a)(c,2),p=u[0],y=u[1],C=Object(g.a)().user,S=Object(h.useState)(!0),P=Object(n.a)(S,2),M=P[0],k=P[1],T=a.id,q=a.name,N=a.email,A=a.userName,D=a.company,I=a.contact;Object(h.useEffect)((function(){M&&(E(),k(!1))}),[M]);var E=function(){var e=Object(b.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)(C.id);case 2:200===(t=e.sent).status?(r({id:t.data.id,name:t.data.name,email:t.data.email,userName:t.data.username,company:t.data.company,contact:t.data.contact}),y({id:t.data.id,name:t.data.name,email:t.data.email,userName:t.data.username,company:t.data.company,contact:t.data.contact})):f.b.error(t.message);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e){e.persist(),r(Object(l.a)(Object(l.a)({},a),{},Object(d.a)({},e.target.name,e.target.value)))},z=function(){var e=Object(b.a)(Object(j.a)().mark((function e(){var t,a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D!==p.company||I!==p.contact||N!==p.email){e.next=4;break}f.b.info("Nothing changes"),e.next=9;break;case 4:return t={id:T,company:D,email:N,contact:I},e.next=7,Object(O.i)(t);case 7:a=e.sent,console.log(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{children:Object(w.jsxs)(x.ValidatorForm,{onSubmit:z,onError:function(){return null},children:[Object(w.jsxs)(m.a,{spacing:6,children:[Object(w.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(w.jsxs)(m.a,{container:!0,spacing:2,children:[Object(w.jsx)(m.a,{item:!0,xs:6,children:Object(w.jsx)(v,{type:"text",name:"name",disabled:"true",id:"standard-basic",value:q||"",onChange:F,errorMessages:["this field is required"],label:"Name",validators:["required"],sx:{width:"100%"}})}),Object(w.jsx)(m.a,{item:!0,xs:6,children:Object(w.jsx)(v,{type:"text",name:"userName",disabled:"true",label:"Username",onChange:F,value:A||"",validators:["required"],errorMessages:["this field is required"],sx:{width:"100%"}})})]})}),Object(w.jsxs)(m.a,{container:!0,spacing:2,children:[Object(w.jsx)(m.a,{item:!0,xs:6,children:Object(w.jsx)(v,{name:"email",label:"Email",value:N||"",onChange:F,validators:["required"],errorMessages:["this field is required","email is not valid"],sx:{width:"100%"}})}),Object(w.jsx)(m.a,{item:!0,xs:6,children:Object(w.jsx)(v,{type:"text",name:"company",value:D||"",label:"Company",onChange:F,validators:["required"],errorMessages:["this field is required"],sx:{width:"100%"}})})]}),Object(w.jsx)(m.a,{container:!0,spacing:2,children:Object(w.jsx)(m.a,{item:!0,xs:6,children:Object(w.jsx)(v,{type:"number",name:"contact",label:"Contact(Phone Number)",onChange:F,InputProps:{endAdornment:[]},value:I||"",errorMessages:["this field is required"],validators:[],sx:{width:"100%"}})})})]}),Object(w.jsxs)(s.a,{color:"primary",variant:"contained",type:"submit",children:[Object(w.jsx)(i.a,{children:"send"}),Object(w.jsx)(o.d,{sx:{pl:1,textTransform:"capitalize"},children:"Submit"})]})]})})},C=a(426),S=a(406),P=a(437),M=a(335),k=a(434),T=a(430),q=a(439),N=a(448),A=a.n(N),D=a(173),I=a.n(D),E=function(e){var t=e.stateOpenChangePassword,a=e.setStateOpenChangePassword,r=Object(g.a)(),c=r.user,i=r.logout,o=Object(h.useState)(),u=Object(n.a)(o,2),d=u[0],l=u[1],p=Object(h.useState)(!1),x=Object(n.a)(p,2),v=x[0],y=x[1],N=Object(h.useState)(),D=Object(n.a)(N,2),E=D[0],F=D[1],z=Object(h.useState)(),B=Object(n.a)(z,2),J=B[0],U=B[1],V=Object(h.useState)(!1),H=Object(n.a)(V,2),L=H[0],G=H[1],K=Object(h.useState)(!1),Q=Object(n.a)(K,2),R=Q[0],W=Q[1],X=Object(h.useState)(!1),Y=Object(n.a)(X,2),Z=Y[0],$=Y[1],_=function(e){e.preventDefault()},ee=function(){F(),U(),y(!1),a(!1)},te=function(){var e=Object(b.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E===J){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(O.g)(c.id,d,E);case 6:t=e.sent,console.log(t),t&&200===t.status?(f.b.success("Change password success"),alert("Please login again!!!"),F(),U(),ee(),a(!1),i()):(f.b.error("Something went wrong. Cannot change password"),F(),U(),ee(),a(!1));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.useEffect)((function(){t&&y(!0)}),[t]),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(C.a,{open:v,onClose:ee,id:"changePassword",maxHeight:!1,height:500,children:[Object(w.jsx)(S.a,{children:"Change Password"}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)("br",{}),Object(w.jsx)(m.a,{item:!0,xs:12,children:Object(w.jsx)(M.a,{id:"outlined-adornment-password-0",type:L?"text":"password",variant:"outlined",label:"Previous Password",value:d,onChange:function(e){l(e.target.value)},InputProps:{endAdornment:Object(w.jsx)(k.a,{position:"end",children:Object(w.jsx)(T.a,{"aria-label":"toggle password visibility",onClick:function(){G(!L)},onMouseDown:_,edge:"end",children:L?Object(w.jsx)(I.a,{}):Object(w.jsx)(A.a,{})})})}})}),Object(w.jsx)("br",{}),Object(w.jsx)(m.a,{item:!0,xs:12,children:Object(w.jsx)(M.a,{id:"outlined-adornment-password-1",type:R?"text":"password",variant:"outlined",label:"Password",value:E,onChange:function(e){F(e.target.value)},InputProps:{endAdornment:Object(w.jsx)(k.a,{position:"end",children:Object(w.jsx)(T.a,{"aria-label":"toggle password visibility",onClick:function(){W(!R)},onMouseDown:_,edge:"end",children:R?Object(w.jsx)(I.a,{}):Object(w.jsx)(A.a,{})})})}})}),Object(w.jsx)("br",{}),Object(w.jsx)(m.a,{item:!0,xs:12,children:Object(w.jsx)(M.a,{id:"outlined-adornment-password-2",type:Z?"text":"password",variant:"outlined",label:"Input Password again",value:J,onChange:function(e){U(e.target.value)},error:E!==J,helperText:E!==J?"Passwords do not match":"",InputProps:{endAdornment:Object(w.jsx)(k.a,{position:"end",children:Object(w.jsx)(T.a,{"aria-label":"toggle password visibility",onClick:function(){$(!Z)},onMouseDown:_,edge:"end",children:Z?Object(w.jsx)(I.a,{}):Object(w.jsx)(A.a,{})})})}})})]}),Object(w.jsxs)(q.a,{children:[Object(w.jsx)(s.a,{onClick:ee,color:"primary",children:"Cancel"}),Object(w.jsx)(s.a,{onClick:te,color:"primary",children:"Change Password"})]})]})})},F=a(125);t.default=function(){var e=Object(h.useState)(!1),t=Object(n.a)(e,2),a=t[0],d=t[1];return Object(w.jsxs)(F.a,{children:[Object(w.jsx)(u.a,{routeSegments:[{name:"Account Manager"},{name:"Account Form"}]}),Object(w.jsxs)(r.a,{spacing:3,children:[Object(w.jsx)(u.g,{title:"User Data",children:Object(w.jsx)(y,{})}),Object(w.jsx)(u.g,{title:"Change Password",children:Object(w.jsx)(c.a,{title:"Change Password",placement:"left",children:Object(w.jsxs)(s.a,{color:"primary",variant:"contained",type:"submit",onClick:function(){d(!0)},children:[Object(w.jsx)(i.a,{children:"edit"}),Object(w.jsx)(o.d,{sx:{pl:1,textTransform:"capitalize"},children:"Change Password"})]})})})]}),Object(w.jsx)(E,{stateOpenChangePassword:a,setStateOpenChangePassword:d})]})}}}]);
//# sourceMappingURL=18.bb910ca2.chunk.js.map