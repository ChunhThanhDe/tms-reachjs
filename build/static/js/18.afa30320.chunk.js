(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[18],{491:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"f",(function(){return s})),a.d(t,"j",(function(){return i})),a.d(t,"i",(function(){return o})),a.d(t,"a",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"g",(function(){return l})),a.d(t,"e",(function(){return j})),a.d(t,"d",(function(){return b}));var n=a(23),r=function(e){return n.a.get("/TMS/api/user/".concat(e),{})},c=function(e){var t={method:"get",maxBodyLength:1/0,url:"/TMS/api/user",params:{page:e.page,limit:e.limit,active:e.active,search:e.search}};return n.a.request(t)},s=function(e){return n.a.post("/TMS/api/auth/signup",{name:e.name,username:e.username,password:e.password,company:e.company,email:e.email,contact:e.contact,rulename:e.rulename}).catch((function(e){if(e.response)return e.response.data}))},i=function(e){return n.a.put("/TMS/api/user/admin/".concat(e.id),{company:e.company,email:e.email,contact:e.contact,rulename:e.rulename})},o=function(e){return n.a.put("/TMS/api/user/".concat(e.id),{company:e.company,email:e.email,contact:e.contact})},u=function(e){return n.a.delete("/TMS/api/user/remove/".concat(e),{})},d=function(e,t){return Object(n.a)({method:"put",url:"/TMS/api/user/admin/password/".concat(e),params:{passwordnew:t}})},l=function(e,t,a){return Object(n.a)({method:"put",url:"/TMS/api/user/password/".concat(e),params:{passwordold:t,passwordnew:a}})},j=function(e){var t={method:"get",url:"/TMS/api/user/".concat(e,"/listDevice")};return n.a.request(t)},b=function(e){return Object(n.a)({method:"get",url:"/TMS/api/barSearch/device",params:{search:e}})}},739:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(272),c=a(480),s=a(366),i=a(270),o=a(120),u=a(68),d=a(6),l=a(3),j=a(17),b=a(28),m=a(7),p=a(367),O=a(491),h=a(2),x=a(567),f=a(188),g=a(58),w=a(1),v=Object(m.a)(x.TextValidator)((function(){return{width:"100%",marginBottom:"16px"}})),y=function(){var e=Object(h.useState)({}),t=Object(n.a)(e,2),a=t[0],r=t[1],c=Object(h.useState)({}),u=Object(n.a)(c,2),m=u[0],y=u[1],C=Object(f.a)().user,S=Object(h.useState)(!0),P=Object(n.a)(S,2),M=P[0],T=P[1],k=a.id,q=a.name,N=a.email,D=a.userName,E=a.company,A=a.contact;Object(h.useEffect)((function(){M&&(I(),T(!1))}),[M]);var I=function(){var e=Object(b.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)(C.id);case 2:200===(t=e.sent).status?(r({id:t.data.id,name:t.data.name,email:t.data.email,userName:t.data.username,company:t.data.company,contact:t.data.contact}),y({id:t.data.id,name:t.data.name,email:t.data.email,userName:t.data.username,company:t.data.company,contact:t.data.contact})):g.b.error(t.message);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e){var t=e.target,a=t.name,n=t.value;r((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(d.a)({},a,n))}))},z=function(){var e=Object(b.a)(Object(j.a)().mark((function e(){var t,a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E!==m.company||A!==m.contact||N!==m.email){e.next=4;break}g.b.info("Nothing changes"),e.next=10;break;case 4:return t={id:k,company:E,email:N,contact:A},e.next=7,Object(O.i)(t);case 7:a=e.sent,console.log(a),200===a.status?(g.b.success("Change data success"),T(!0)):g.b.error(a.message);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{children:Object(w.jsxs)(x.ValidatorForm,{onSubmit:z,onError:function(){return null},children:[Object(w.jsxs)(p.a,{container:!0,spacing:2,children:[Object(w.jsx)(p.a,{item:!0,xs:6,children:Object(w.jsx)(v,{type:"text",name:"name",disabled:!0,label:"Name",value:q||"",onChange:F,validators:["required"],errorMessages:["This field is required"],sx:{width:"100%"}})}),Object(w.jsx)(p.a,{item:!0,xs:6,children:Object(w.jsx)(v,{type:"text",name:"userName",disabled:!0,label:"Username",value:D||"",onChange:F,validators:["required"],errorMessages:["This field is required"],sx:{width:"100%"}})}),Object(w.jsx)(p.a,{item:!0,xs:6,children:Object(w.jsx)(v,{name:"email",label:"Email",value:N||"",onChange:F,validators:["required","isEmail"],errorMessages:["This field is required","Email is not valid"],sx:{width:"100%"}})}),Object(w.jsx)(p.a,{item:!0,xs:6,children:Object(w.jsx)(v,{type:"text",name:"company",label:"Company",value:E||"",onChange:F,validators:["required"],errorMessages:["This field is required"],sx:{width:"100%"}})}),Object(w.jsx)(p.a,{item:!0,xs:6,children:Object(w.jsx)(v,{name:"contact",type:"text",label:"Contact (Phone Number)",value:A||"",onChange:F,validators:["required"],errorMessages:["This field is required"],sx:{width:"100%"}})})]}),Object(w.jsx)("br",{}),Object(w.jsxs)(s.a,{color:"primary",variant:"contained",type:"submit",children:[Object(w.jsx)(i.a,{children:"send"}),Object(w.jsx)(o.d,{sx:{pl:1,textTransform:"capitalize"},children:"Submit"})]})]})})},C=a(445),S=a(457),P=a(488),M=a(375),T=a(485),k=a(481),q=a(489),N=a(498),D=a.n(N),E=a(189),A=a.n(E),I=function(e){var t=e.stateOpenChangePassword,a=e.setStateOpenChangePassword,r=Object(f.a)(),c=r.user,i=r.logout,o=Object(h.useState)(),u=Object(n.a)(o,2),d=u[0],l=u[1],m=Object(h.useState)(!1),x=Object(n.a)(m,2),v=x[0],y=x[1],N=Object(h.useState)(),E=Object(n.a)(N,2),I=E[0],F=E[1],z=Object(h.useState)(),B=Object(n.a)(z,2),J=B[0],U=B[1],V=Object(h.useState)(!1),H=Object(n.a)(V,2),L=H[0],G=H[1],K=Object(h.useState)(!1),Q=Object(n.a)(K,2),R=Q[0],W=Q[1],X=Object(h.useState)(!1),Y=Object(n.a)(X,2),Z=Y[0],$=Y[1],_=function(e){e.preventDefault()},ee=function(){F(),U(),y(!1),a(!1)},te=function(){var e=Object(b.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I===J){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(O.g)(c.id,d,I);case 6:(t=e.sent)&&200===t.status?(g.b.success("Change password success"),alert("Please login again!!!"),F(),U(),ee(),a(!1),i()):(g.b.error("Something went wrong. Cannot change password"),F(),U(),ee(),a(!1));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.useEffect)((function(){t&&y(!0)}),[t]),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(C.a,{open:v,onClose:ee,id:"changePassword",maxHeight:!1,height:500,children:[Object(w.jsx)(S.a,{children:"Change Password"}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)("br",{}),Object(w.jsx)(p.a,{item:!0,xs:12,children:Object(w.jsx)(M.a,{id:"outlined-adornment-password-0",type:L?"text":"password",variant:"outlined",label:"Previous Password",value:d,onChange:function(e){l(e.target.value)},InputProps:{endAdornment:Object(w.jsx)(T.a,{position:"end",children:Object(w.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){G(!L)},onMouseDown:_,edge:"end",children:L?Object(w.jsx)(A.a,{}):Object(w.jsx)(D.a,{})})})}})}),Object(w.jsx)("br",{}),Object(w.jsx)(p.a,{item:!0,xs:12,children:Object(w.jsx)(M.a,{id:"outlined-adornment-password-1",type:R?"text":"password",variant:"outlined",label:"Password",value:I,onChange:function(e){F(e.target.value)},InputProps:{endAdornment:Object(w.jsx)(T.a,{position:"end",children:Object(w.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){W(!R)},onMouseDown:_,edge:"end",children:R?Object(w.jsx)(A.a,{}):Object(w.jsx)(D.a,{})})})}})}),Object(w.jsx)("br",{}),Object(w.jsx)(p.a,{item:!0,xs:12,children:Object(w.jsx)(M.a,{id:"outlined-adornment-password-2",type:Z?"text":"password",variant:"outlined",label:"Input Password again",value:J,onChange:function(e){U(e.target.value)},error:I!==J,helperText:I!==J?"Passwords do not match":"",InputProps:{endAdornment:Object(w.jsx)(T.a,{position:"end",children:Object(w.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){$(!Z)},onMouseDown:_,edge:"end",children:Z?Object(w.jsx)(A.a,{}):Object(w.jsx)(D.a,{})})})}})})]}),Object(w.jsxs)(q.a,{children:[Object(w.jsx)(s.a,{onClick:ee,color:"primary",children:"Cancel"}),Object(w.jsx)(s.a,{onClick:te,color:"primary",children:"Change Password"})]})]})})},F=a(83);t.default=function(){var e=Object(h.useState)(!1),t=Object(n.a)(e,2),a=t[0],d=t[1];return Object(w.jsxs)(F.a,{children:[Object(w.jsx)(u.a,{routeSegments:[{name:"Account Manager"},{name:"Account Form"}]}),Object(w.jsxs)(r.a,{spacing:3,children:[Object(w.jsx)(u.g,{title:"User Data",children:Object(w.jsx)(y,{})}),Object(w.jsx)(u.g,{title:"Change Password",children:Object(w.jsx)(c.a,{title:"Change Password",placement:"left",children:Object(w.jsxs)(s.a,{color:"primary",variant:"contained",type:"submit",onClick:function(){d(!0)},children:[Object(w.jsx)(i.a,{children:"edit"}),Object(w.jsx)(o.d,{sx:{pl:1,textTransform:"capitalize"},children:"Change Password"})]})})})]}),Object(w.jsx)(I,{stateOpenChangePassword:a,setStateOpenChangePassword:d})]})}}}]);